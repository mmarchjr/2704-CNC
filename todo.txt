- finish optimization controller

- add max part constraint func
